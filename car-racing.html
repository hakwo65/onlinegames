<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Car Racing Game 2D</title>
  <style>
    body {
      margin: 0;
      background: #333;
    }
    canvas {
      display: block;
      margin: auto;
      background: #111;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="300" height="500"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const roadWidth = 200;
    const roadX = (canvas.width - roadWidth) / 2;

    let carX = roadX + 80;
    const carY = 400;
    const carWidth = 40;
    const carHeight = 60;

    let obstacleX = roadX + Math.random() * (roadWidth - 40);
    let obstacleY = -60;
    const obstacleWidth = 40;
    const obstacleHeight = 60;

    let roadLineY = 0;
    let treeY = 0;
    let buildingY = 0;

    let gameOver = false;

    function drawBackground() {
      // Sky background
      ctx.fillStyle = '#222';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Buildings
      for (let i = 0; i < 5; i++) {
        let x = i * 60;
        ctx.fillStyle = "#444";
        ctx.fillRect(x, (buildingY + i * 100) % canvas.height, 40, 60);
      }
    }

    function drawRoad() {
      ctx.fillStyle = "#555";
      ctx.fillRect(roadX, 0, roadWidth, canvas.height);

      // Lane lines
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 4;
      for (let i = 0; i < 10; i++) {
        const lineY = (roadLineY + i * 60) % canvas.height;
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, lineY);
        ctx.lineTo(canvas.width / 2, lineY + 30);
        ctx.stroke();
      }
    }

    function drawTrees() {
      ctx.fillStyle = "green";
      for (let i = 0; i < 6; i++) {
        const y = (treeY + i * 100) % canvas.height;
        ctx.beginPath();
        ctx.arc(roadX - 20, y, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(roadX + roadWidth + 20, y, 15, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function drawCar() {
      ctx.fillStyle = "lime";
      ctx.fillRect(carX, carY, carWidth, carHeight);
    }

    function drawObstacle() {
      ctx.fillStyle = "red";
      ctx.fillRect(obstacleX, obstacleY, obstacleWidth, obstacleHeight);
    }

    function moveElements() {
      roadLineY += 5;
      treeY += 3;
      buildingY += 1;

      obstacleY += 5;
      if (obstacleY > canvas.height) {
        obstacleY = -60;
        obstacleX = roadX + Math.random() * (roadWidth - obstacleWidth);
      }
    }

    function detectCollision() {
      if (
        carX < obstacleX + obstacleWidth &&
        carX + carWidth > obstacleX &&
        carY < obstacleY + obstacleHeight &&
        carY + carHeight > obstacleY
      ) {
        gameOver = true;
        alert("Game Over!");
        location.reload();
      }
    }

    function draw() {
      if (gameOver) return;

      drawBackground();
      drawRoad();
      drawTrees();
      drawCar();
      drawObstacle();
      moveElements();
      detectCollision();

      requestAnimationFrame(draw);
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft" && carX > roadX) carX -= 10;
      if (e.key === "ArrowRight" && carX < roadX + roadWidth - carWidth) carX += 10;
    });

    draw();
  </script>
</body>
</html>
